<!doctype html>
<html lang="en" itemscope itemtype="http://schema.org/Person">
<head>
            <meta charset="utf-8">
        <!-- Site Meta Data -->
        <title>Setting Up My Site</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="Shane Maloney">

        <link rel="shortcut icon" href="">

        <!-- schema.org -->
        <meta itemprop="name" content="samaloney">
        <meta itemprop="image" content="https://pbs.twimg.com/profile_images/879771897650479104/IW1qXFlU_400x400.jpg">
        <meta itemprop="description" content="">

        <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700' rel='stylesheet' type='text/css'>
        <!-- Style Meta Data -->
        <link rel="stylesheet" href="http://samaloney.com/theme/css/style.css" type="text/css"/>
        <link rel="stylesheet" href="http://samaloney.com/theme/css/pygments.css" type="text/css"/>

        <!-- Feed Meta Data -->
            <link href="http://samaloney.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
                  title="samaloney ATOM Feed"/>

        <!-- Twitter Feed -->
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="samaloney">
        <meta name="twitter:image" content="">

    <meta name="twitter:creator" content="samaloney">
    <meta name="twitter:url" content="http://samaloney.com/setting-up-my-site.html">
    <meta name="twitter:title" content="samaloney ~ Setting Up My Site">
    <meta name="twitter:description" content="Creating my personal website.">

    <!-- Facebook Meta Data -->
    <meta property="og:title" content="samaloney ~ Setting Up My Site"/>
    <meta property="og:description" content="Creating my personal website."/>
    <meta property="og:image" content=""/>
</head>

<body>
<!-- Sidebar -->
<aside>
    <center><a href="http://samaloney.com"><img id="avatar" src="https://pbs.twimg.com/profile_images/879771897650479104/IW1qXFlU_400x400.jpg"></a></center>
    <h1>samaloney</h1>
        <p>Solar Physics, Programming, Technology</p>
    <br>

        <a class="twitter-follow-button"
           href="https://twitter.com/samaloney"
           data-show-count="false"
           data-lang="en">
            Follow @twitterdev
        </a>
        <script type="text/javascript">
            window.twttr = (function (d, s, id) {
                var t, js, fjs = d.getElementsByTagName(s)[0];
                if (d.getElementById(id)) return;
                js = d.createElement(s);
                js.id = id;
                js.src = "https://platform.twitter.com/widgets.js";
                fjs.parentNode.insertBefore(js, fjs);
                return window.twttr || (t = {
                        _e: [], ready: function (f) {
                            t._e.push(f)
                        }
                    });
            }(document, "script", "twitter-wjs"));
        </script>

    <nav class="nav">
        <ul class="list-bare">

                <li><a class="nav__link" href="http://samaloney.com">Home</a></li>
                <li><a class="nav__link" href="http://samaloney.com/category/blog.html">Blog</a></li>

                <li><a class="nav__link" href="http://samaloney.com/pages/about.html">About</a></li>
                <li><a class="nav__link" href="http://samaloney.com/pages/publications.html">Publications</a></li>

        </ul>
    </nav>

    <p class="social">
                <a href="https://www.linkedin.com/in/samaloney" target="_blank"><img
                        src="http://samaloney.com/theme/images/icons/linkedin.png"></a>
                <a href="https://github.com/samaloney" target="_blank"><img
                        src="http://samaloney.com/theme/images/icons/github.png"></a>
                <a href="https://twitter.com/samaloney" target="_blank"><img
                        src="http://samaloney.com/theme/images/icons/twitter.png"></a>
            <a href="http://samaloney.com/feeds/all.atom.xml" rel="alternate">
                <img src="http://samaloney.com/theme/images/icons/rss.png"></a>
    </p>

        <h2>Categories</h2>
        <ul class="navbar">
                <li class="active"><a
                        href="http://samaloney.com/category/blog.html">Blog</a></li>
                <li><a
                        href="http://samaloney.com/category/how-to.html">How To</a></li>
        </ul>

        <h2 class="blog_roll_link"><br/>BLOGROLLS</h2>
        <ul class="navbar">
                <li><a href="http://sunpy.org/">SunPy</a></li>
                <li><a href="http://github.com/sunpy/xrayvision">xrayvision</a></li>
                <li><a href="http://www.tcd.ie/Physics/research/themes/astrophysics/">TCD Astro</a></li>
        </ul>

</aside>

<!-- Content -->
<article>
    <section id="content">
        <article>
            <h2 class="post_title post_detail"><a href="http://samaloney.com/setting-up-my-site.html" rel="bookmark"
                                                  title="Permalink to Setting Up My Site">Setting Up My Site</a></h2>
            <div class="entry-content blog-post">
                <h2>Preamble</h2>
<p>I've been putting off setting up a personal website for far too long. In the past I've looked at various options for creating a personal site such as, <a href="https://www.wordpress.org">WordPress</a>, <a href="https://jekyllrb.com">Jekyll</a>, <a href="https://gohugo.io">Hugo</a> but none of them really seemed to suite my needs.</p>
<p>WordPress is great and I'm familiar with using it however, it seems a bit of overkill for my purposes. I don't really need dynamic server side functions and I would have to host it somewhere, not a big deal by why bother when it's not necessary.As I don't need any dynamic content I decided to look at static site generators. Also static sites can be hosted on GitHub via <a href="https://pages.github.com">GitHub pages</a>, one less thing to manage.</p>
<p>Jekyll seems to be one of the most popular and well supported, it has lots of nice themes, plugins and is even integrated with GitHub pages. However it is written in <a href="https://www.ruby-lang.org/en/">Ruby</a>, which I'm not too familiar with same goes for its template language <a href="https://shopify.github.io/liquid/">Liquid</a>. Next up Hugo another very popular static site generator with good support and lots of nice themes. Hugo is written in Go, which I'm not that familiar with, or Go's template system.</p>
<p>Enter <a href="https://blog.getpelican.com">Pelican</a> a python based static site generator which uses <a href="http://jinja.pocoo.org">Jina template</a> language which I know from working with Django. Pelican doesn't seem to have as large a community as either Jekyll or Hugo buy it also seem to be a little less complex. In the end I've chosen to use Pelican for a number of reasons:</p>
<ol>
<li>Python based with Jina templates</li>
<li>Easy integration with GitHub pages</li>
<li>Smaller community but seems a bit less complex so will be easier to hack</li>
</ol>
<h2>Lets go!</h2>
<p>So my first step was to create a isolated environment (pyenv and virtualenv) and get Pelican installed</p>
<div class="highlight"><pre><span></span>mkproject -python3 samloney.com
pip install pelican
pelican-quickstart
</pre></div>


<p>At this point I could begin to add content look for a theme. As for a theme I wanted something responsive, minimal, looked good on mobile or desktops, and would be easy to modify. I quickly found <a href="https://github.com/Parbhat/pelican-blue">pelican-blue</a> by <a href="https://github.com/Parbhat">Parbhat Puri</a> which looked good but I knew I would need to make some modifications so I forked the repo <a href="https://github.com/samaloney/pelican-blue">here</a></p>
<p>Next I wanted to add a list of my publications to the site, I could have done this by hand but this seemed like a job to automate. After some initial searching I came across a Pelican plugin called <a href="https://github.com/adamreeve/pelican_publications">pelican_publications</a> that seemed like it would do the job. It would take a <code>.bib</code> file, parse it and return the contents to a template. After a quick install it became apparent that I would need to create the template.</p>
<div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
    <span class="nt">&lt;ul&gt;</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">pub</span> <span class="k">in</span> <span class="nv">publications</span> <span class="cp">%}</span>
        <span class="nt">&lt;li&gt;</span>
            <span class="cp">{%</span> <span class="k">for</span> <span class="nv">author</span> <span class="k">in</span> <span class="nv">pub</span><span class="o">[</span><span class="s1">&#39;author&#39;</span><span class="o">]</span><span class="cp">%}</span>
                <span class="cp">{{</span><span class="s1">&#39; &#39;</span><span class="nv">.join</span><span class="o">(</span><span class="nv">author</span><span class="o">)</span><span class="nv">.replace</span><span class="o">(</span><span class="s1">&#39;~&#39;</span><span class="o">,</span> <span class="s1">&#39; &#39;</span><span class="o">)</span><span class="cp">}}</span>, 
            <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
            <span class="nt">&lt;em&gt;</span><span class="cp">{{</span><span class="nv">pub</span><span class="o">[</span><span class="s1">&#39;title&#39;</span><span class="o">]</span><span class="cp">}}</span><span class="nt">&lt;/em&gt;</span>, 
            <span class="cp">{%</span> <span class="k">if</span> <span class="nv">pub</span><span class="o">[</span><span class="s1">&#39;journal&#39;</span><span class="o">]</span> <span class="o">==</span> <span class="s1">&#39;\\aap&#39;</span> <span class="cp">%}</span>
                A<span class="err">&amp;</span>A, 
            <span class="cp">{%</span> <span class="k">elif</span> <span class="nv">pub</span><span class="o">[</span><span class="s1">&#39;journal&#39;</span><span class="o">]</span> <span class="o">==</span> <span class="s1">&#39;\\solphys&#39;</span> <span class="cp">%}</span>
                Sol. Phys., 
            <span class="cp">{%</span> <span class="k">elif</span> <span class="nv">pub</span><span class="o">[</span><span class="s1">&#39;journal&#39;</span><span class="o">]</span> <span class="o">==</span> <span class="s1">&#39;\\apjl&#39;</span> <span class="cp">%}</span>
                ApJL
            <span class="cp">{%</span> <span class="k">else</span><span class="cp">%}</span>
                <span class="cp">{{</span><span class="nv">pub</span><span class="o">[</span><span class="s1">&#39;journal&#39;</span><span class="o">]</span><span class="cp">}}</span>
            <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
            <span class="cp">{{</span><span class="nv">pub</span><span class="o">[</span><span class="s1">&#39;year&#39;</span><span class="o">]</span><span class="cp">}}</span>, 
            <span class="cp">{{</span><span class="nv">pub</span><span class="o">[</span><span class="s1">&#39;month&#39;</span><span class="o">]</span><span class="nv">.capitalize</span><span class="o">()</span><span class="cp">}}</span>, 
            <span class="cp">{{</span><span class="nv">pub</span><span class="o">[</span><span class="s1">&#39;volume&#39;</span><span class="o">]</span><span class="cp">}}</span>, 
            P <span class="cp">{{</span><span class="nv">pub</span><span class="o">[</span><span class="s1">&#39;pages&#39;</span><span class="o">]</span><span class="cp">}}</span>,
            <span class="cp">{%</span> <span class="k">if</span> <span class="nv">pub</span><span class="o">[</span><span class="s1">&#39;eprint&#39;</span><span class="o">]</span> <span class="cp">%}</span>
                <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;https://arxiv.org/abs/</span><span class="cp">{{</span><span class="nv">pub</span><span class="o">[</span><span class="s1">&#39;eprint&#39;</span><span class="o">]</span><span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>arXiv<span class="nt">&lt;/a&gt;</span>,
            <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
            <span class="cp">{%</span> <span class="k">if</span> <span class="nv">pub</span><span class="o">[</span><span class="s1">&#39;doi&#39;</span><span class="o">]</span> <span class="cp">%}</span>
                <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;https://doi.org/</span><span class="cp">{{</span><span class="nv">pub</span><span class="o">[</span><span class="s1">&#39;doi&#39;</span><span class="o">]</span><span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>DOI<span class="nt">&lt;/a&gt;</span>,
            <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
            <span class="cp">{%</span> <span class="k">if</span> <span class="nv">pub</span><span class="o">[</span><span class="s1">&#39;adsurl&#39;</span><span class="o">]</span> <span class="cp">%}</span>
                <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span><span class="nv">pub</span><span class="o">[</span><span class="s1">&#39;adsurl&#39;</span><span class="o">]</span><span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>ADS<span class="nt">&lt;/a&gt;</span>
            <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
        <span class="nt">&lt;/li&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
    <span class="nt">&lt;/ul&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>


<p>It turned out the the pelican_publications plugin didn't quite do what I expected/wanted which made the template more complicated then I wanted, a task for the future, it was good enough for the moment.</p>
<h2>Time to Publish</h2>
<p>At this point I figured I might as well try publishing what I had so far so I created a repo with the correct name following the GitHub pages <a href="https://pages.github.com">instructions</a>. I ran <code>make publish</code> which runs pelican with <code>pelicanconf.py</code> and additionally <code>publishconf.py</code> where I set the site name to my github pages url. As suggested in the pelican doc I had installed ghp-import so all I had to do was</p>
<div class="highlight"><pre><span></span>ghp-import &lt;path&gt;/&lt;to&gt;/output
git push orgin gh-pages
</pre></div>


<p>and it didn't work a quick review of the GitHub Pages docs seem to indicate user pagaes now had to be in the master branch. Second try</p>
<div class="highlight"><pre><span></span>ghp-import -b master &lt;path&gt;/&lt;to&gt;/output
git push orgin master
</pre></div>


<p>it worked will kind of, the home page seemed ok, missing some css but every other page was borked. A quick review of browser console indicated issues serving mixed content (http, https) and the links were not being generated correctly. After a bit of playing around I found the causes:</p>
<ol>
<li>RTFM - from pelican docs <code>SITEURL</code> must be full URL with protocol</li>
<li>Also with the theme I was using <code>SITEURL</code> had at the start of <code>pelicanconf.py</code> and didn't work when set in <code>publishconf.py</code></li>
</ol>
<p>Success!</p>
<p>The code for the site at this stage can be found <a href="">here</a></p>
            </div>
            <div class="post_list">
                <span>By </span>
                <a href="http://samaloney.com/author/shane-maloney.html">@Shane Maloney</a>
                <span> in </span>
                <span class="post_category"><a href="http://samaloney.com/category/blog.html" rel="bookmark"
                                               title="Permalink to Blog">[ Blog ]</a></span>
                <span class="post_date">Sun 21 January 2018</span>
                <div><span>Tags : </span>
                            <span><a href="http://samaloney.com/tag/pelican.html">#pelican, </a></span>
                            <span><a href="http://samaloney.com/tag/publishing.html">#publishing, </a></span>
                </div>

                <div class="entry-social">
                    <span class="twitter"><a target="_blank" rel="nofollow"
                                             onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=400,width=700');return false;"
                                             title="Twitter"
                                             href="https://twitter.com/share?url=http://samaloney.com/setting-up-my-site.html&text=Setting Up My Site&via=samaloney"><img
                            src="http://samaloney.com/theme/images/icons/twitter-s.png"></a></span>

                    <span class="gplus"><a target="_blank" title="Google +"
                                           href="https://plus.google.com/share?url=http://samaloney.com/setting-up-my-site.html&hl=fr"
                                           rel="nofollow"
                                           onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=650');return false;"><img
                            src="http://samaloney.com/theme/images/icons/google-s.png"></a></span>

                    <span class="facebook"><a target="_blank" title="Facebook" rel="nofollow"
                                              onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=500,width=700');return false;"
                                              href="https://www.facebook.com/sharer.php?u=http://samaloney.com/setting-up-my-site.html&t=Setting Up My Site"><img
                            src="http://samaloney.com/theme/images/icons/facebook-s.png"></a></span>

                    <a target="_blank" title="Linkedin"
                       href="https://www.linkedin.com/shareArticle?mini=true&url=http://samaloney.com/setting-up-my-site.html&title=Setting Up My Site"
                       rel="nofollow"
                       onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=650');return false;"><img
                            src="http://samaloney.com/theme/images/icons/linkedin-s.png"></a>

                    <span class="mail"><a
                            href="mailto:?subject=Setting Up My Site&amp;body=Viens découvrir un article à propos de [Setting Up My Site] sur le site de Shane Maloney. http://samaloney.com/setting-up-my-site.html"
                            title="Share by Email" target="_blank"><img
                            src="http://samaloney.com/theme/images/icons/mail-s.png"></a></span>
                </div>
            </div>
        </article>
    </section>
</article>

<!-- Footer -->


</body>
</html>